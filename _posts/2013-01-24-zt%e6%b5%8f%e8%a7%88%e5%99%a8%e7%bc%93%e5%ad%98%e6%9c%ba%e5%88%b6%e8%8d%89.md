---
title: zt:浏览器缓存机制(草)
author: admin
layout: post
permalink: /?p=186
categories:
  - 转载的
---
<div class="bct fc05 fc11 nbw-blog ztag">
  <div id="cnblogs_post_body" style="word-break: normal !important; line-height: 25px;">
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="color: #000000;"><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">浏览器缓存机制，其实<b>主要就是</b></span></span></span><span style="font-size: 10.5pt;"><b><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">HTTP</span></span></b><b><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">协议定义的缓存机制（如：</span></span><span style="font-family: 'Calibri';"> <span lang="EN-US" style="line-height: 12pt;">Expires</span></span></b><b><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">；</span></span><span style="font-family: 'Calibri';"> <span lang="EN-US" style="line-height: 12pt;">Cache-control</span></span></b><span style="font-family: '微软雅黑';"><b><span style="line-height: 12pt;">等）</span></b><span style="line-height: 12pt;">。但是也有非</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">HTTP</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">协议定义的缓存机制，如使用</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">HTML Meta </span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">标签，</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">Web</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">开发者可以在</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">HTML</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">页面的</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';"><head></span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">节点中加入</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';"><meta></span></span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">标签，代码如下：</span></span></span></span>
    </p>
    
    <div style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: normal; word-break: normal;" align="center">
      <table style="border-collapse: collapse; text-align: left;" border="1" cellspacing="0" cellpadding="0">
        <tr>
          <td style="border: 1pt solid black; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important;" valign="top" width="568">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <b><span lang="EN-US" style="line-height: normal;"><span style="font-size: 10.5pt; color: #000000; font-family: 'verdana';"><i><meta http-equiv=&#8221;Pragma&#8221; content=&#8221;no-cache&#8221;></i></span></span></b>
            </p>
          </td>
        </tr>
      </table>
    </div>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="color: #000000;"><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">上述代码的作用是告诉浏览器当前页面不被缓存，每次访问都需要去服务器拉取。使用很简单，但只有部分浏览器可以支持，而且所有缓存代理服务器都不支持，因为代理不解析</span></span></span><span style="font-size: 10.5pt;"><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">HTML</span></span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">内容本身。</span></span></span></span>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="color: #000000;"><b><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;"> </span></span></span></b></span>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="color: #000000;"><b><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">下面我主要介绍</span></span></span><span style="font-size: 10.5pt;"><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">HTTP</span></span></span></b><b><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">协议定义的缓存机制。</span></span></span></b></span>
    </p>
    
    <div style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; border-bottom-color: windowtext; border-width: medium medium 1pt; border-style: none none solid; padding: 0cm 0cm 1pt; line-height: normal; word-break: normal;">
      <h1 style="font-size: 26px; font-weight: normal; padding: 0cm; line-height: 16pt; margin: 24pt 0cm 0pt;">
        <span style="color: #365f91;"><span lang="EN-US" style="line-height: 18pt;"><span style="font-family: 'Cambria';"><span style="font-size: 16pt;"><span style="font-weight: bold;">Expires</span></span></span></span><span style="line-height: 18pt;"><span style="font-family: '宋体';"><span style="font-size: 16pt;"><span style="font-weight: bold;">策略（HTTP 1.0）</span></span></span></span></span>
      </h1>
    </div>
    
    <p style="line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span><span lang="EN-US" style="font-family: 微软雅黑; color: #333333; line-height: 12pt;"><span><span style="font-size: 10.5pt;">Expires </span></span></span><span style="font-size: 10.5pt;"><span style="font-family: 微软雅黑; color: #333333; line-height: 12pt;">是 </span><span lang="EN-US" style="font-family: 微软雅黑; color: #333333; line-height: 12pt;">Web</span><span style="line-height: 12pt;"><span><span style="font-family: 微软雅黑; color: #333333;">服务器响应消息头字段</span><b><i><span style="background-color: #ffffff; color: #808080; font-family: 'verdana';">(Response Header)</span></i></b><span style="font-family: 微软雅黑; color: #333333;">，在响应</span></span></span><span lang="EN-US" style="font-family: 微软雅黑; color: #333333; line-height: 12pt;">http</span></span></span><span style="font-family: 微软雅黑; color: #333333; line-height: 12pt;"><span style="font-size: 10.5pt;"><span style="color: #000000;">请求时告诉</span><b><span style="line-height: 12pt;"><span style="color: #ff0000;">浏览器在过期时间前，</span></span></b><span style="color: #000000;">浏览器可以直接从浏览器缓存取数据，而无需再次请求。</span></span></span>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="color: #000000;"><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">下面是宝宝</span></span></span><span style="font-size: 10.5pt;"><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">PK</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">项目中，浏览器拉取</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">jquery.js web</span></span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">服务器的响应头：</span></span></span></span>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;" align="center">
      <span lang="EN-US" style="line-height: 12pt;"><a style="outline-style: none; text-decoration: none; color: #3d81ee; border-bottom-width: 1px; border-bottom-style: dashed;" href="http://images.cnblogs.com/cnblogs_com/skynet/201211/201211281402412240.png" rel="nofollow"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px;" title="clip_image001" alt="clip_image001" src="http://images.cnblogs.com/cnblogs_com/skynet/201211/201211281402425894.png" width="339" height="340" border="0" /></a></span>
    </p>
    
    <div style="font-family: Georgia, 'Times New Roman', Times, sans-serif; border-bottom-color: #4f81bd; border-width: medium medium 1pt; border-style: none none solid; padding: 0cm 0cm 4pt; line-height: normal; margin-left: 46.8pt; word-break: normal; margin-right: 46.8pt;">
      <p style="text-align: center; line-height: 12pt; margin: 10pt 0cm 14pt; text-indent: 0pt; padding: 0cm;">
        <span style="color: #333333;"><strong><span style="line-height: 10pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 9pt;"> 注：</span></span></span><span style="font-size: 9pt;"><span lang="EN-US" style="line-height: 10pt;"><span style="font-family: 'Calibri';">Date</span></span><span style="line-height: 10pt;"><span style="font-family: '微软雅黑';">头域表示消息发送的时间，时间的描述格式由</span></span><span lang="EN-US" style="line-height: 10pt;"><span style="font-family: 'Calibri';">rfc822</span></span><span style="line-height: 10pt;"><span style="font-family: '微软雅黑';">定义。例如，</span></span><span lang="EN-US" style="line-height: 10pt;"><span style="font-family: 'Calibri';">Date: Mon,31 Dec 2001 04:25:57GMT</span></span></span><span style="line-height: 10pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 9pt;">。</span></span></span></strong></span>
      </p>
    </div>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="color: #000000;"><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';"><span style="font-size: 10.5pt;">Web</span></span></span><span style="font-size: 10.5pt;"><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">服务器告诉浏览器在</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">2012-11-28 03:30:01</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">这个时间点之前，可以使用缓存文件，</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">即缓存</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">5</span></span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">分钟。</span></span></span></span>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="color: #000000;"><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">不过</span></span></span><span style="font-size: 10.5pt;"><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">Expires </span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">是</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">HTTP 1.0</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">的东西，现在默认浏览器均默认使用</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">HTTP 1.1</span></span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">，所以它的作用基本忽略。</span></span></span></span>
    </p>
    
    <div style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; border-bottom-color: windowtext; border-width: medium medium 1pt; border-style: none none solid; padding: 0cm 0cm 1pt; line-height: normal; word-break: normal;">
      <h1 style="font-size: 26px; font-weight: normal; padding: 0cm; line-height: 16pt; margin: 24pt 0cm 0pt;">
        <span style="color: #365f91;"><span lang="EN-US" style="line-height: 18pt;"><span style="font-family: 'Cambria';"><span style="font-size: 16pt;"><span style="font-weight: bold;">Cache-control</span></span></span></span><span style="font-size: 16pt;"><span style="line-height: 18pt;"><span style="font-family: '宋体';"><span style="font-weight: bold;">策略</span></span></span></span></span>
      </h1>
    </div>
    
    <p style="color: #333333; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="font-family: '微软雅黑';"><span style="color: #000000;"><span lang="EN-US" style="line-height: 12pt;"><span><span style="font-size: 10.5pt;">Cache-Control </span></span></span><span style="font-size: 10.5pt;"><span style="line-height: 12pt;">与 </span><span lang="EN-US" style="line-height: 12pt;">Expires</span></span></span><span style="font-size: 10.5pt;"><span style="line-height: 12pt;"><span style="color: #000000;">的作用一致，都是指明当前资源的<b>有效期</b>，控制浏览器是否直接从浏览器缓存取数据还是重新发请求到服务器取数据。</span><span style="line-height: 12pt;"><span style="color: #ff0000;">只不过</span></span></span><span style="color: #ff0000;"><span lang="EN-US" style="line-height: 12pt;">Cache-Control</span><span style="line-height: 12pt;">的<b>选择更多，设置更细致</b>，如果同时设置的话，其<b>优先级高于</b></span><b><span lang="EN-US" style="line-height: 12pt;">Expires</span></b></span></span><span style="line-height: 12pt;"><span style="font-size: 10.5pt; color: #000000;">。</span></span></span>
    </p>
    
    <div style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: normal; word-break: normal;" align="center">
      <table style="border-collapse: collapse; text-align: left;" border="1" cellspacing="0" cellpadding="0">
        <tr>
          <td style="border-width: 1pt 1pt medium; border-style: solid solid none; border-top-color: black; border-right-color: black; border-left-color: black; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: black; background-position: initial initial; background-repeat: initial initial;" valign="top" width="568">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="color: #cce8cf;"><b><span lang="EN-US" style="line-height: normal;"><span style="font-family: 'Calibri';"><span style="font-size: 10.5pt;">http</span></span></span></b><span style="font-size: 10.5pt;"><b><span style="line-height: normal;"><span style="font-family: '微软雅黑';">协议头</span></span><span lang="EN-US" style="line-height: normal;"><span style="font-family: 'Calibri';">Cache-Control<span style="line-height: normal;"> </span></span></span></b></span><b><span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">：</span></span></span></b></span>
            </p>
          </td>
        </tr>
        
        <tr>
          <td style="border: 1pt solid black; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important;" valign="top" width="568">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="color: #ff0000; font-family: '微软雅黑';"><b><span style="line-height: normal;"><span style="font-size: 10.5pt;">值可以是</span></span><span style="font-size: 10.5pt;"><span lang="EN-US" style="line-height: normal;">public</span></span><span style="font-size: 10.5pt;"><span style="line-height: normal;">、</span><span lang="EN-US" style="line-height: normal;">private</span><span style="line-height: normal;">、</span><span lang="EN-US" style="line-height: normal;">no-cache</span><span style="line-height: normal;">、</span><span lang="EN-US" style="line-height: normal;">no- store</span><span style="line-height: normal;">、</span><span lang="EN-US" style="line-height: normal;">no-transform</span><span style="line-height: normal;">、</span><span lang="EN-US" style="line-height: normal;">must-revalidate</span><span style="line-height: normal;">、</span><span lang="EN-US" style="line-height: normal;">proxy-revalidate</span></span><span style="font-size: 10.5pt;"><span style="line-height: normal;">、</span></span><span lang="EN-US" style="line-height: normal;"><span style="font-size: 10.5pt;">max-age</span></span></b></span>
            </p>
            
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <b><span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">各个消息中的指令含义如下：</span></span></span></b>
            </p>
            
            <ol style="padding-left: 50px; margin-top: 0cm; margin-bottom: 0cm; margin-left: 30pt;" type="1">
              <li style="font-size: 13px; line-height: normal; padding: 0px; list-style-type: decimal; margin: 0cm 0cm 0pt;">
                <span style="color: #000000;"><b><span lang="EN-US"><span style="font-family: 'Calibri';"><span style="font-size: 10.5pt;">Public</span></span></span></b><b><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">指示响应可被任何缓存区缓存。</span></span></b></span>
              </li>
              <li style="font-size: 13px; line-height: normal; padding: 0px; list-style-type: decimal; margin: 0cm 0cm 0pt;">
                <span style="color: #000000;"><b><span lang="EN-US"><span style="font-family: 'Calibri';"><span style="font-size: 10.5pt;">Private</span></span></span></b><b><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">指示对于单个用户的整个或部分响应消息，不能被共享缓存处理。这允许服务器仅仅描述当用户的部分响应消息，此响应消息对于其他用户的请求无效。</span></span></b></span>
              </li>
              <li style="font-size: 13px; line-height: normal; padding: 0px; list-style-type: decimal; margin: 0cm 0cm 0pt;">
                <span style="color: #000000;"><b><span lang="EN-US"><span style="font-family: 'Calibri';"><span style="font-size: 10.5pt;">no-cache</span></span></span></b><b><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">指示请求或响应消息不能缓存</span></span></b></span>
              </li>
              <li style="font-size: 13px; line-height: normal; padding: 0px; list-style-type: decimal; margin: 0cm 0cm 0pt;">
                <span style="color: #000000;"><b><span lang="EN-US"><span style="font-family: 'Calibri';"><span style="font-size: 10.5pt;">no-store</span></span></span></b><b><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">用于防止重要的信息被无意的发布。在请求消息中发送将使得请求和响应消息都不使用缓存。</span></span></b></span>
              </li>
              <li style="font-size: 13px; line-height: normal; padding: 0px; list-style-type: decimal; margin: 0cm 0cm 0pt;">
                <span style="color: #ff0000;"><b><span lang="EN-US"><span style="font-family: 'Calibri';"><span style="font-size: 10.5pt;">max-age</span></span></span></b><b><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">指示客户机可以接收生存期不大于指定时间（以秒为单位）的响应。</span></span></b></span>
              </li>
              <li style="font-size: 13px; line-height: normal; padding: 0px; list-style-type: decimal; margin: 0cm 0cm 0pt;">
                <span style="color: #000000;"><b><span lang="EN-US"><span style="font-family: 'Calibri';"><span style="font-size: 10.5pt;">min-fresh</span></span></span></b><b><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">指示客户机可以接收响应时间小于当前时间加上指定时间的响应。</span></span></b></span>
              </li>
              <li style="font-size: 13px; line-height: normal; padding: 0px; list-style-type: decimal; margin: 0cm 0cm 0pt;">
                <span style="color: #000000;"><b><span lang="EN-US"><span style="font-family: 'Calibri';"><span style="font-size: 10.5pt;">max-stale</span></span></span></b><span style="font-size: 10.5pt;"><b><span style="font-family: '微软雅黑';">指示客户机可以接收超出超时期间的响应消息。如果指定</span><span lang="EN-US"><span style="font-family: 'Calibri';">max-stale</span></span></b></span><b><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">消息的值，那么客户机可以接收超出超时期指定值之内的响应消息。</span></span></b></span>
              </li>
            </ol>
          </td>
        </tr>
      </table>
    </div>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="color: #000000;"><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">还是上面那个请求，</span></span></span><span style="font-size: 10.5pt;"><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">web</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">服务器返回的</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">Cache-Control</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">头的值为</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">max-age=300</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">，即</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">5</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">分钟（和上面的</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: 'Calibri';">Expires</span></span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">时间一致，这个不是必须的）。</span></span></span></span>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;" align="center">
      <span lang="EN-US" style="line-height: 12pt;"><a style="outline-style: none; text-decoration: none; color: #3d81ee; border-bottom-width: 1px; border-bottom-style: dashed;" href="http://images.cnblogs.com/cnblogs_com/skynet/201211/201211281402423419.png" rel="nofollow"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px;" title="clip_image002" alt="clip_image002" src="http://images.cnblogs.com/cnblogs_com/skynet/201211/201211281402428992.png" width="305" height="201" border="0" /></a></span>
    </p>
    
    <h2 style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; font-size: 22px; background-image: none; margin: 10pt 0cm 0pt; padding: 0px; font-weight: normal; line-height: 15pt; word-break: normal; background-position: 0% 0%;">
      <span lang="EN-US"><span style="font-family: 'Cambria';"><span style="font-size: 13pt; color: #4f81bd;"><span style="font-weight: bold;"> </span></span></span></span>
    </h2>
    
    <h2 style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; font-size: 22px; background-image: none; margin: 10pt 0cm 0pt; padding: 0px; font-weight: normal; line-height: 15pt; word-break: normal; background-position: 0% 0%;">
      <span lang="EN-US"><span style="font-family: 'Cambria';"><span style="font-size: 13pt; color: #4f81bd;"><span style="font-weight: bold;">Last-Modified/If-Modified-Since</span></span></span></span>
    </h2>
    
    <p style="color: #333333; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="color: #000000; font-family: '微软雅黑';"><span lang="EN-US" style="line-height: 12pt;"><span><span style="font-size: 10.5pt;">Last-Modified/If-Modified-Since</span></span></span><span style="font-size: 10.5pt;"><span style="line-height: 12pt;">要配合</span><span lang="EN-US" style="line-height: 12pt;">Cache-Control</span></span><span style="line-height: 12pt;"><span style="font-size: 10.5pt;">使用。</span></span></span>
    </p>
    
    <p style="color: #333333; line-height: 12pt; margin: 0cm 0cm 0pt 21pt; text-indent: -21pt; word-break: normal;">
      <span style="color: #000000;"><span lang="EN-US" style="font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt;"><span style="line-height: 12pt;"><span style="font-family: 'Wingdings';">l</span><span style="line-height: normal;"><span style="font-family: 'Times New Roman';"><span style="font-size: 7pt;">  </span></span></span></span></span><span style="font-family: '微软雅黑';"><span lang="EN-US" style="line-height: 12pt;"><span>Last-Modified</span></span><span style="line-height: 12pt;">：标示该响应资源的最后修改时间。W</span><span lang="EN-US" style="line-height: 12pt;">eb</span><span style="line-height: 12pt;">服务器在响应请求时，告诉浏览器资源的最后修改时间。</span></span></span>
    </p>
    
    <p style="line-height: 12pt; margin: 0cm 0cm 10pt 21pt; text-indent: -21pt; word-break: normal;">
      <span><span lang="EN-US" style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt;"><span style="line-height: 12pt;"><span style="font-family: 'Wingdings';">l</span><span style="line-height: normal;"><span style="font-family: 'Times New Roman';"><span style="font-size: 7pt;">  </span></span></span></span></span><span lang="EN-US" style="color: #333333; line-height: 12pt;"><span style="font-family: '微软雅黑';">If-Modified-Since</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="color: #333333;">：当资源过期时</span><i><span style="color: #808080;">（使用</span></i></span></span><span style="font-family: '微软雅黑';"><i><span style="color: #808080;"><span lang="EN-US" style="line-height: 12pt;">Cache-Control </span><span style="line-height: 12pt;">标识的</span><span lang="EN-US" style="line-height: 12pt;">max-age</span></span></i><span style="line-height: 12pt;"><i><span style="color: #808080;">），</span></i><span style="color: #333333;">发现资源具有</span></span><span lang="EN-US" style="color: #333333; line-height: 12pt;">Last-Modified</span><span style="color: #333333; line-height: 12pt;">声明，则再次向W</span><span lang="EN-US" style="color: #333333; line-height: 12pt;">eb</span><span style="line-height: 12pt;"><span style="color: #333333;">服务器请求</span><span style="color: #333333;">时带上头字段 </span></span><span style="color: #333333;"><span lang="EN-US" style="line-height: 12pt;">If-Modified-Since</span></span><span style="color: #333333; line-height: 12pt;">，表示请求时间。</span><b style="color: #333333;"><span lang="EN-US" style="line-height: 12pt;">web</span></b><span style="color: #333333;"><span style="font-weight: bold; line-height: 12pt;">服务器<span style="line-height: 12pt;">收到请求后发现有头字段</span></span><span lang="EN-US" style="line-height: 12pt;"><b>If-Modified-Since，</b></span></span><span style="color: #333333;"><span style="line-height: 12pt;"><b>则与被请求资源的最后修改时间进行比对</b></span></span><span style="color: #333333; line-height: 12pt;"><b>。</b>若最后修改时间较新，说明资源有可能又被改动过，则响应整片资源内容（写在响应消息包体内），</span><span lang="EN-US" style="color: #333333; line-height: 12pt;"><b>HTTP 200</b></span><span style="color: #333333; line-height: 12pt;">；若最后修改时间较旧，说明资源可能无新修改，则响应</span><span lang="EN-US" style="color: #333333; line-height: 12pt;"><b>HTTP 304</b> (</span><span style="color: #333333; line-height: 12pt;">无需包体，节省浏览</span><span lang="EN-US" style="color: #333333; line-height: 12pt;">)</span><span style="color: #333333; line-height: 12pt;">，告知浏览器继续使用所保存的</span><span lang="EN-US" style="color: #333333; line-height: 12pt;">cache</span><span style="color: #333333; line-height: 12pt;">。</span></span></span>
    </p>
    
    <h2 style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; font-size: 22px; background-image: none; margin: 10pt 0cm 0pt; padding: 0px; font-weight: normal; line-height: 15pt; word-break: normal; background-position: 0% 0%;">
      <span style="font-weight: bold; font-size: 13pt; color: #4f81bd; font-family: Cambria; line-height: 15pt;"> </span>
    </h2>
    
    <h2 style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; font-size: 22px; background-image: none; margin: 10pt 0cm 0pt; padding: 0px; font-weight: normal; line-height: 15pt; word-break: normal; background-position: 0% 0%;">
      <span style="font-weight: bold; font-size: 13pt; color: #4f81bd; font-family: Cambria; line-height: 15pt;">Etag/If-None-Match</span>
    </h2>
    
    <p style="color: #333333; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="color: #000000; font-family: '微软雅黑';"><span lang="EN-US" style="line-height: 12pt;"><span><span style="font-size: 10.5pt;">Etag/If-None-Match</span></span></span><span style="font-size: 10.5pt;"><span style="line-height: 12pt;">也要配合</span><span lang="EN-US" style="line-height: 12pt;">Cache-Control</span></span><span style="line-height: 12pt;"><span style="font-size: 10.5pt;">使用。</span></span></span>
    </p>
    
    <p style="color: #333333; line-height: 12pt; margin: 0cm 0cm 0pt 21pt; text-indent: -21pt; word-break: normal;">
      <span style="color: #000000;"><span lang="EN-US" style="font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt;"><span style="line-height: 12pt;"><span style="font-family: 'Wingdings';">l</span><span style="line-height: normal;"><span style="font-family: 'Times New Roman';"><span style="font-size: 7pt;">  </span></span></span></span></span><span style="font-family: '微软雅黑';"><span lang="EN-US" style="line-height: 12pt;"><span>Etag</span></span><span style="line-height: 12pt;">：</span><span lang="EN-US" style="line-height: 12pt;">web</span><span style="line-height: 12pt;">服务器响应请求时，告诉浏览器当前资源在服务器的唯一标识（生成规则由服务器决定）。在</span><span lang="EN-US" style="line-height: 12pt;">Apache</span><span style="line-height: 12pt;">中，</span><span lang="EN-US" style="line-height: 12pt;">ETag</span><span style="line-height: 12pt;">的值，默认是对文件的索引节点（</span><span lang="EN-US" style="line-height: 12pt;">INode</span><span style="line-height: 12pt;">），大小（</span><span lang="EN-US" style="line-height: 12pt;">Size</span><span style="line-height: 12pt;">）和最后修改时间（</span><span lang="EN-US" style="line-height: 12pt;">MTime</span><span style="line-height: 12pt;">）进行</span><span lang="EN-US" style="line-height: 12pt;">Hash</span><span style="line-height: 12pt;">后得到的</span><span style="line-height: 12pt;">。</span></span></span>
    </p>
    
    <p style="line-height: 12pt; margin: 0cm 0cm 10pt 21pt; text-indent: -21pt; word-break: normal;">
      <span><span lang="EN-US" style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt;"><span style="line-height: 12pt;"><span style="font-family: 'Wingdings';">l</span><span style="line-height: normal;"><span style="font-family: 'Times New Roman';"><span style="font-size: 7pt;">  </span></span></span></span></span><span style="font-family: '微软雅黑';"><span lang="EN-US" style="color: #333333; line-height: 12pt;"><span>If-None-Match</span></span><span style="line-height: 12pt;"><span style="color: #333333;">：当资源过期时</span><i><span style="color: #808080;">（使用</span></i></span><i><span style="color: #808080;"><span lang="EN-US" style="line-height: 12pt;">Cache-Control</span><span style="line-height: 12pt;">标识的</span><span lang="EN-US" style="line-height: 12pt;">max-age</span></span></i><span style="line-height: 12pt;"><i><span style="color: #808080;">）</span></i><span style="color: #333333;">，发现资源具有</span></span><span lang="EN-US" style="color: #333333; line-height: 12pt;">Etage</span><span style="color: #333333; line-height: 12pt;">声明，则再次向</span><span lang="EN-US" style="color: #333333; line-height: 12pt;">web</span><span style="color: #333333; line-height: 12pt;">服务器请求时带上头字段</span><span lang="EN-US" style="color: #333333; line-height: 12pt;">If-None-Match<b> </b></span><i><span style="color: #808080;"><span style="line-height: 12pt;">（值为</span><span lang="EN-US" style="line-height: 12pt;">Etag</span><span style="line-height: 12pt;">的值）</span></span></i><span style="color: #333333; line-height: 12pt;">。</span><b style="color: #333333;"><span lang="EN-US" style="line-height: 12pt;">web</span></b><b style="color: #333333;"><span style="line-height: 12pt;">服务器<span style="line-height: 12pt;">收到请求后发现有头</span></span><span lang="EN-US" style="line-height: 12pt;">If-None-Match </span></b><b style="color: #333333;"><span style="line-height: 12pt;">则与被请求资源的相应校验串进行比对，决定返回</span><span lang="EN-US" style="line-height: 12pt;">200</span></b><b style="color: #333333;"><span style="line-height: 12pt;">或</span><span lang="EN-US" style="line-height: 12pt;">304</span></b><span style="color: #333333; line-height: 12pt;">。</span></span></span>
    </p>
    
    <div style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; border-bottom-color: windowtext; border-width: medium medium 1pt; border-style: none none solid; padding: 0cm 0cm 1pt; line-height: normal; word-break: normal;">
      <h1 style="font-size: 26px; font-weight: normal; padding: 0cm; line-height: 16pt; margin: 24pt 0cm 0pt;">
        <span style="color: #365f91;"><span style="line-height: 18pt;"><span style="font-family: '宋体';"><span style="font-size: 16pt;"><span style="font-weight: bold;">既生</span></span></span></span><span style="font-size: 16pt;"><span lang="EN-US" style="line-height: 18pt;"><span style="font-family: 'Cambria';"><span style="font-weight: bold;">Last-Modified</span></span></span><span style="line-height: 18pt;"><span style="font-family: '宋体';"><span style="font-weight: bold;">何生</span></span></span><span lang="EN-US" style="line-height: 18pt;"><span style="font-family: 'Cambria';"><span style="font-weight: bold;">Etag</span></span></span></span><span style="line-height: 18pt;"><span style="font-family: '宋体';"><span style="font-size: 16pt;"><span style="font-weight: bold;">？</span></span></span></span></span>
      </h1>
    </div>
    
    <p style="color: #333333; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="color: #000000; font-family: '微软雅黑';"><span style="line-height: 12pt;"><span style="font-size: 10.5pt;">你可能会觉得使用</span></span><span style="font-size: 10.5pt;"><span lang="EN-US" style="line-height: 12pt;">Last-Modified</span><span style="line-height: 12pt;">已经足以让浏览器知道本地的缓存副本是否足够新，为什么还需要</span><span lang="EN-US" style="line-height: 12pt;">Etag</span><span style="line-height: 12pt;">（实体标识）呢？</span><span lang="EN-US" style="line-height: 12pt;">HTTP1.1</span><span style="line-height: 12pt;">中</span><span lang="EN-US" style="line-height: 12pt;">Etag</span><span style="line-height: 12pt;">的出现主要是为了解决几个</span><span lang="EN-US" style="line-height: 12pt;">Last-Modified</span></span><span style="line-height: 12pt;"><span style="font-size: 10.5pt;">比较难解决的问题：</span></span></span>
    </p>
    
    <p style="color: #333333; line-height: 12pt; margin: 0cm 0cm 0pt 21pt; text-indent: -21pt; word-break: normal;">
      <span style="color: #000000;"><span lang="EN-US" style="font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt;"><span style="line-height: 12pt;"><span style="font-family: 'Wingdings';">l</span><span style="line-height: normal;"><span style="font-family: 'Times New Roman';"><span style="font-size: 7pt;">  </span></span></span></span></span><span style="font-family: '微软雅黑';"><span lang="EN-US" style="line-height: 12pt;"><span>Last-Modified</span></span><span style="line-height: 12pt;">标注的最后修改只精确到秒级，如果某文件在</span><span lang="EN-US" style="line-height: 12pt;">1</span><span style="line-height: 12pt;">秒内，被修改多次，将不能准确标注文件的修改时间</span></span></span>
    </p>
    
    <p style="color: #333333; line-height: 12pt; margin: 0cm 0cm 0pt 21pt; text-indent: -21pt; word-break: normal;">
      <span style="color: #000000;"><span lang="EN-US" style="line-height: 12pt; font-family: Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height: 12pt;"><span style="font-family: 'Wingdings';">l</span><span style="line-height: normal;"><span style="font-family: 'Times New Roman';"><span style="font-size: 7pt;">  </span></span></span></span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">如果某文件会被定期生成，但有时内容并没有任何变化，但</span></span><span lang="EN-US" style="line-height: 12pt;"><span style="font-family: '微软雅黑';">Last-Modified</span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">却改变了，导致文件没法使用缓存</span></span></span>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt 21pt; text-indent: -21pt; word-break: normal;">
      <span style="color: #000000;"><span lang="EN-US" style="line-height: 12pt;"><span style="line-height: 12pt;"><span style="font-family: 'Wingdings';">l</span><span style="line-height: normal;"><span style="font-family: 'Times New Roman';"><span style="font-size: 7pt;">  </span></span></span></span></span><span style="line-height: 12pt;"><span style="font-family: '微软雅黑';">有可能存在服务器没有准确获取文件修改时间，或者与代理服务器时间不一致等情形</span></span></span>
    </p>
    
    <p style="color: #333333; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="font-family: '微软雅黑';"><span style="color: #000000;"><span lang="EN-US" style="line-height: 12pt;"><span><span style="font-size: 10.5pt;">Etag</span></span></span><span style="font-size: 10.5pt;"><span style="line-height: 12pt;">是服务器自动生成或者由开发者生成的对应资源在服务器端的唯一标识符，能够更加准确的控制缓存。</span><b><span lang="EN-US" style="line-height: 12pt;">Last-Modified</span></b><b><span style="line-height: 12pt;">与</span><span lang="EN-US" style="line-height: 12pt;">ETag</span></b></span></span><span style="font-size: 10.5pt;"><b><span style="line-height: 12pt;"><span style="color: #000000;">是可以一起使用的，</span><span style="line-height: 12pt;"><span style="color: #ff0000;">服务器会优先验证</span></span></span><span lang="EN-US" style="line-height: 12pt;"><span style="color: #ff0000;">ETag</span></span></b><span style="color: #000000;"><b><span style="line-height: 12pt;">，一致的情况下，才会继续比对</span><span lang="EN-US" style="line-height: 12pt;">Last-Modified</span></b><b><span style="line-height: 12pt;">，最后才决定是否返回</span><span lang="EN-US" style="line-height: 12pt;">304</span></b></span></span><span style="line-height: 12pt;"><span style="font-size: 10.5pt; color: #000000;">。</span></span></span>
    </p>
    
    <div style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; border-bottom-color: windowtext; border-width: medium medium 1pt; border-style: none none solid; padding: 0cm 0cm 1pt; line-height: normal; word-break: normal;">
      <h1 style="font-size: 26px; font-weight: normal; padding: 0cm; line-height: 16pt; margin: 24pt 0cm 0pt;">
        <span style="line-height: 18pt;"><span style="font-family: '宋体';"><span style="font-size: 16pt; color: #365f91;"><span style="font-weight: bold;">用户行为与缓存</span></span></span></span>
      </h1>
    </div>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">浏览器缓存行为还有用户的行为有关！</span></span></span>
    </p>
    
    <div style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: normal; word-break: normal;" align="center">
      <table style="border-collapse: collapse; text-align: left;" border="1" cellspacing="0" cellpadding="0">
        <tr>
          <td style="border-width: 1pt medium 1pt 1pt; border-style: solid none solid solid; border-top-color: #404040; border-bottom-color: #404040; border-left-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: black; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <b><span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #cce8cf;">用户操作</span></span></span></b>
            </p>
          </td>
          
          <td style="border-width: 1pt medium; border-style: solid none; border-top-color: #404040; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: black; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <b><span lang="EN-US" style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #cce8cf;">Expires/Cache-Control</span></span></span></b>
            </p>
          </td>
          
          <td style="border-width: 1pt 1pt 1pt medium; border-style: solid solid solid none; border-top-color: #404040; border-right-color: #404040; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: black; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <b><span lang="EN-US" style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #cce8cf;">Last-Modified/Etag</span></span></span></b>
            </p>
          </td>
        </tr>
        
        <tr>
          <td style="border-width: medium medium 1pt 1pt; border-style: none none solid solid; border-bottom-color: #404040; border-left-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: silver; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <b><span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">地址栏回车</span></span></span></b>
            </p>
          </td>
          
          <td style="border-width: medium medium 1pt; border-style: none none solid; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: silver; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">有效</span></span></span>
            </p>
          </td>
          
          <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-right-color: #404040; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: silver; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">有效</span></span></span>
            </p>
          </td>
        </tr>
        
        <tr>
          <td style="border-width: medium medium 1pt 1pt; border-style: none none solid solid; border-bottom-color: #404040; border-left-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <b><span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">页面链接跳转</span></span></span></b>
            </p>
          </td>
          
          <td style="border-width: medium medium 1pt; border-style: none none solid; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">有效</span></span></span>
            </p>
          </td>
          
          <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-right-color: #404040; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">有效</span></span></span>
            </p>
          </td>
        </tr>
        
        <tr>
          <td style="border-width: medium medium 1pt 1pt; border-style: none none solid solid; border-bottom-color: #404040; border-left-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: silver; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <b><span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">新开窗口</span></span></span></b>
            </p>
          </td>
          
          <td style="border-width: medium medium 1pt; border-style: none none solid; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: silver; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">有效</span></span></span>
            </p>
          </td>
          
          <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-right-color: #404040; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: silver; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">有效</span></span></span>
            </p>
          </td>
        </tr>
        
        <tr>
          <td style="border-width: medium medium 1pt 1pt; border-style: none none solid solid; border-bottom-color: #404040; border-left-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <b><span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">前进、后退</span></span></span></b>
            </p>
          </td>
          
          <td style="border-width: medium medium 1pt; border-style: none none solid; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">有效</span></span></span>
            </p>
          </td>
          
          <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-right-color: #404040; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">有效</span></span></span>
            </p>
          </td>
        </tr>
        
        <tr>
          <td style="border-width: medium medium 1pt 1pt; border-style: none none solid solid; border-bottom-color: #404040; border-left-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: silver; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="color: #000000;"><b><span lang="EN-US" style="line-height: normal;"><span style="font-family: 'Calibri';"><span style="font-size: 10.5pt;">F5</span></span></span></b><b><span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">刷新</span></span></span></b></span>
            </p>
          </td>
          
          <td style="border-width: medium medium 1pt; border-style: none none solid; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: silver; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #ff0000;">无效</span></span></span>
            </p>
          </td>
          
          <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-right-color: #404040; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important; background-color: silver; background-position: initial initial; background-repeat: initial initial;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">有效</span></span></span>
            </p>
          </td>
        </tr>
        
        <tr>
          <td style="border-width: medium medium 1pt 1pt; border-style: none none solid solid; border-bottom-color: #404040; border-left-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="color: #000000;"><b><span lang="EN-US" style="line-height: normal;"><span style="font-family: 'Calibri';"><span style="font-size: 10.5pt;">Ctrl+F5</span></span></span></b><b><span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt;">刷新</span></span></span></b></span>
            </p>
          </td>
          
          <td style="border-width: medium medium 1pt; border-style: none none solid; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #ff0000;">无效</span></span></span>
            </p>
          </td>
          
          <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-right-color: #404040; border-bottom-color: #404040; border-collapse: collapse; padding: 0cm 5.4pt; word-break: normal !important;" valign="top" width="189">
            <p style="line-height: normal; margin: 0cm 0cm 0pt; text-indent: 0pt; font-size: 13px;">
              <span style="line-height: normal;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #ff0000;">无效</span></span></span>
            </p>
          </td>
        </tr>
      </table>
    </div>
    
    <div style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; border-bottom-color: windowtext; border-width: medium medium 1pt; border-style: none none solid; padding: 0cm 0cm 1pt; line-height: normal; word-break: normal;">
      <h1 style="font-size: 26px; font-weight: normal; padding: 0cm; line-height: 16pt; margin: 24pt 0cm 0pt;">
        <span style="line-height: 18pt;"><span style="font-family: '宋体';"><span style="font-size: 16pt; color: #365f91;"><span style="font-weight: bold;">总结</span></span></span></span>
      </h1>
    </div>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">浏览器第一次请求：</span></span></span>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;" align="center">
      <span lang="EN-US" style="line-height: 12pt;"><a style="outline-style: none; text-decoration: none; color: #3d81ee; border-bottom-width: 1px; border-bottom-style: dashed;" href="http://images.cnblogs.com/cnblogs_com/skynet/201211/201211281402437389.png" rel="nofollow"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px;" title="clip_image004" alt="clip_image004" src="http://images.cnblogs.com/cnblogs_com/skynet/201211/201211281402437422.png" width="411" height="369" border="0" /></a></span>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <span style="line-height: 12pt;"><span style="font-family: '微软雅黑';"><span style="font-size: 10.5pt; color: #000000;">浏览器再次请求时：</span></span></span>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;" align="center">
      <span lang="EN-US" style="line-height: 12pt;"><a style="outline-style: none; text-decoration: none; color: #3d81ee; border-bottom-width: 1px; border-bottom-style: dashed;" href="http://images.cnblogs.com/cnblogs_com/skynet/201211/201211281402438011.png" rel="nofollow"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px;" title="clip_image006" alt="clip_image006" src="http://images.cnblogs.com/cnblogs_com/skynet/201211/201211281402442505.png" width="554" height="528" border="0" /></a></span>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <strong style="font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; margin: 0px; padding: 0px; background-color: #ffffff;"> </strong>
    </p>
    
    <p style="color: #333333; font-family: Georgia, 'Times New Roman', Times, sans-serif; line-height: 12pt; margin: 0cm 0cm 10pt; text-indent: 0pt; font-size: 13px; word-break: normal;">
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <strong style="margin: 0px; padding: 0px; color: #333333; background-color: #ffffff;">缓存分类</strong>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　1）私有缓存——</span><span style="line-height: 28px;">常见就是我们的浏览器里内置的缓存。</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　2）公有缓存——</span><span style="line-height: 28px;">常见的就是代理缓存，不多介绍。</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <strong style="margin: 0px; padding: 0px; color: #333333; background-color: #ffffff;">缓存的处理流程<img style="margin: 0px auto; padding: 0px; font-size: 12px; color: #232323; border-style: none; display: block;" title="浏览器缓存机制(草) - 旧城 - 秋·水落石出" alt="" src="http://pic001.cnblogs.com/images/2012/145819/2012121020190031.png" /></strong>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　处理流程图，如上所示，下面分步骤具体介绍：</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　<i><b>1）请求处理</b></i></span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　用户发起一个HTTP请求，缓存获取到URL，根据URL查找是否有匹配的副本，这个副本可能在内存中，也可能在本地磁盘。</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　<i><b>2） 新鲜度检测</b></i></span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　如果缓存中存在所请求资源的副本，则进行新鲜度检测，检查这个副本有没有过期，如果没有过期，直接使用。如果已经过期，则进行再验证。</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　<i><b>3）服务器再验证</b></i></span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　缓存中的文档过期了并不代表他和服务器上的不一样，所以这个时候就需要问问服务器，过期的这段时间里这个文档到底有没有改变。如果改变了，缓存就会获取一份新的文档副本，然后发送给客户端。如果没有改变，缓存只需要获取新的首部，包括一个新的过期时间，并对缓存中的首部更新。</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　<i><b>4）创建响应并返回</b></i></span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　我们希望缓存看起来就像是来自原始服务器一样，缓存将已缓存的服务器响应首部作为响应首部，发送给客户端。</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <strong style="margin: 0px; padding: 0px; color: #333333; background-color: #ffffff;"> </strong>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <strong style="margin: 0px; padding: 0px; color: #333333; background-color: #ffffff;">保质期的实现</strong>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　HTTP中，通过 Cache-Control 首部和 Expires 首部为文档指定过期时间，通过对过期时间的判断，缓存就可以知道文档是不是在保质期内。Expires 首部和 Cache-Control:max-age 首部都是来告诉缓存文档有没有过期，为什么需要两个响应首部来做这件简单的事情了？其实这一切都是历史原因，Expires首部是HTTP 1.0中提出来的，因为他使用的是绝对日期，如果服务端和客户端时钟不同步的话（实际上这种情况非常常见），缓存可能就会认为文档已经过了保质期。</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　HTTP 1.1为了修正这个问题，引入了Cache-Control:max-age首部，这个首部使用相对时间来控制保质期，让一切变得更加合理。</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <strong style="margin: 0px; padding: 0px; color: #333333; background-color: #ffffff;"> </strong>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <strong style="margin: 0px; padding: 0px; color: #333333; background-color: #ffffff;">服务器再验证</strong>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　HTTP中，使用两个请求首部来完成这个功能：If-Modified-Sice 和 If-None-Match。为啥又要两个首部来完成这个功能了？答案还是因为历史的原因。一开始使用 If-Modified-Sice:<date>首部，date是上一次缓存文件时，响应中Last-Modified首部的值。</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　客户端拿着这个值，问服务器，这段时间内文件有没有修改过？服务器看了看这个文件的修改时间，如果没有修改过，会返回一个304 Not Modified的响应；如果修改过，把最新的文件返回给客户端。后来，人们发现这样有问题，因为就算修改时间变化了，文档也不一定发生改变！于是乎，就有了 If-None-Match:<tag>首部，tag是上一次缓存文档时，响应中Etag的值，Etag是一种唯一标识资源的方式。</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <strong style="margin: 0px; padding: 0px; color: #333333; background-color: #ffffff;"> </strong>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <strong style="margin: 0px; padding: 0px; color: #333333; background-color: #ffffff;">试探性过期</strong>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　如果响应中既没有Cache-Control:max-age首部又没有Expires首部，缓存可以计算出一个试探性最大使用期。这东西打个比方就是缓存会根据响应的Last-Modified来决定这文档靠不靠谱，需不需要再验证，如果Last-Modified中的日期是很早之前，那缓存就认为这文档挺靠谱，近期之内应该不会变化；如果Last-Modified中的日期是最近几天，那缓存可能就认为这文档可能经常改变，不靠谱。当然这么粗略的判断想想就知道不严谨，所以我们一定要设置Expires首部和Cache-Control首部。</span>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <strong style="margin: 0px; padding: 0px; color: #333333; background-color: #ffffff;"> </strong>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <strong style="margin: 0px; padding: 0px; color: #333333; background-color: #ffffff;">写在最后</strong>
      </p>
      
      <p style="margin: 5px auto; font-family: verdana, Arial, Helvetica, 微软雅黑, sans-serif; color: #232323; line-height: 28px;">
        <span style="background-color: #ffffff;">　　在chrome上为了保证文件安全，不信任缓存过期时间的设定，每次请求时都会询问服务器(再验证)。</span>
      </p></div> 
      
      <div id="MySignature" style="margin-top: 10px;">
        <div id="SkynetSignature">
          <div style="color: #333333; line-height: 25px; font-family: Georgia, 'Times New Roman', Times, sans-serif;">
          </div>
          
          <p style="margin: 12px auto;">
            <span style="color: #333333; line-height: 1.8; font-family: 'verdana';"><b><i>文章引用：</i></b></span>
          </p>
          
          <p style="margin: 12px auto;">
            <span style="color: #333333; font-family: 'verdana';">浏览器缓存机制——</span><span style="color: #333333; line-height: 1.8; font-family: verdana;">http://www.cnblogs.com/skynet/    </span>
          </p>
          
          <p style="margin: 12px auto;">
            <span style="color: #333333; font-family: 'verdana';">HTTP协议：缓存——http://kb.cnblogs.com/page/166267/</span><span style="color: #333333; line-height: 1.8; font-family: verdana;">      </span>
          </p>
          
          <p style="margin: 12px auto;">
            <span style="color: #333333; font-family: 'verdana';">HTTP协议之缓存——http://kb.cnblogs.com/page/165482/</span>
          </p>
        </div>
      </div>
      
      <p>
        <wbr />
      </p></div>