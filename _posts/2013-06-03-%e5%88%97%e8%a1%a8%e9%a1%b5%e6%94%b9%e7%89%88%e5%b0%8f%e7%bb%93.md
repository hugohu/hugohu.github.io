---
layout: post
title: 列表页改版小结
date: 2013-06-03 14:29
author: admin
comments: true
categories: [随笔]
tags: []
---
seo那边提过来的需求，要求把列表页进行改版。想看下原型。
<img src="http://huugle.org/meta/img/glassList-Mod.jpg" alt="" />
非常粗糙的一个原型图。能大概看到个轮廓。
然后再分析下原版的里列表页。
<img src="http://huugle.org/meta/img/glassList-old.jpg" alt="" />
毫无归类，代码臃肿加载缓慢的一个页面。
于是，开始构思方案。
首先是配色。
我个人比较崇尚简洁的配色，所以决定458fce为主色调进行搭配。主要参考了几个已蓝色系为主色调的网站。
然后扁平化处理。
感觉这种色调是比较舒服也比较合适的。

<b>页面重构</b>
然后开始分析面包削。参考阿里巴巴的面包削，结合实际情况，进行了如下合并。
<img src="http://huugle.org/meta/img/loca.jpg" alt="" />
效果总体来说不错。
接下来是分类选择，seo那边的需求是能合并的尽量合并，然后我这边需要做的是精简代码
<img src="http://huugle.org/meta/img/20130603140421.png" alt="" />
一个dl标签包裹过。

然后是筛选菜单，参考了几个知名网站的实现方式。我认为因为放开几个常用的，这样能更加直接的展现给客户。
跟seo沟通之后进行合并开放。
接下来的构建工作基本上都是按部就班，不一一详述了。

<b>页面优化</b>
这一块花了比较多的心思，首先是标签的语义化。图片合并并压缩。这里让我纠结的是ie6的问题。
原则是渐进增强。首先不影响整体效果的情况下。,满足高级浏览器阴影，圆角适当添加。
我这里的处理方法是高级浏览器用base64图片。然后低级浏览器 ie6 7写个*background的hack。
这里需要注意的是ie8最大支持32kb的base64图片还是够的。

然后进行整体的html块优化，蜘蛛爬进网站肯定希望第一时间抓到的是有更新的东西，而不是死的东西。
所以我决定把固定的两块分类跟筛选菜单进行置底操作。页面构建完成之后再动态加入到上方。
考虑过用position:absolute的方案，但是因为分类块有隐藏跟伸缩的选项。所以放弃了。
然后开始思考动态插入对渲染的影响。主要是回流重新渲染的问题。参考了多方面的资料，发现影响并不是很大。
所以就直接用jquery，append过去。

脚本的优化不用说了所有脚本置底。图片动态的lazy load 之类的合并。
这里要思考的是关于hover的实现的思考，因为除了ie6之外的浏览器都是支持hover的。
所以有没有必要整体重写一个hover的插件值得想一下。
所以我采用了特殊处理，判断浏览器ie6然后进行添加class的处理。高级浏览器直接自带支持hover。
当然思考过用csshover.htc的方案，感觉不是很靠谱表达式就更加不用说了。最终还是选择了上面这种。

然后广告的话就动态加载好了。减少点资源开销。

最终效果:
<img src="http://huugle.org/meta/img/glassList-new.jpg" alt="" />
线上效果：<a href="http://www.glass.com.cn/supply/mengshaboli321_1.html">http://www.glass.com.cn/supply/mengshaboli321_1.html</a>
感觉还有可优化的地方。有些细节的地方做了就忘记了。

 头部的修改也是比较头疼的地方。
颜色搭配不好，前后修改了4 5 个方案。终于差不多了。
 到底用什么方式引进来会比较好。参考了一些资料，最后选择了document.write
 这个方法不会管你页面有没有加载渲染完都直接先写入的。所以避免了空白停顿。

